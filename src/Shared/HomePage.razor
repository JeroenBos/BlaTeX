@page "/"
@inject HttpClient Http
@using BlaTeX.Components
@using Microsoft.AspNetCore.Components.Web

<h3>This component demonstrates calling JS from .NET. </h3>
<input value=@initialValue
       @oninput="onInputChanged" />


<p data-test="loaded">Regular KaTeX component:</p>
<KaTeX Math=@math ChildComponentMarkupService=inputReplacer/>
<p>Interactive KaTeX component3:</p>

<p>
    ðŸš§
    <!-- #region 
        <InteractiveKaTeX Math=@math />
    -->
</p>


@code {
    private const string initialValue = "c = \\pm \\sqrt{a^2 + b^2} \\blatex{input}";
    private string math = initialValue;
    private IChildComponentMarkupService inputReplacer => new LiteralChildComponentMarkupService("input", @<input>);

    private void onInputChanged(ChangeEventArgs e)
    {
        math = (string)(e.Value ?? throw new ArgumentException("ChangeEventArgs.Value"));
    }
}
